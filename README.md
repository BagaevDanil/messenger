# Клиент-серверное приложение Messenger, основанное на использовании сокетов.

## Описание
В ходе проекта требовалось написать мессенджер с использованием языка С++. Необходимо было реализовать и клиент, и сервер. Ожидаемая топология подключения клиентов - звезда (один сервер, который знает всё и обо всех клиентах).
Реализованный набор функциональностей:
* Авторизация
* Регистрация новых пользователей
* Отправка и прием текстовых сообщений
* Хранение истории сообщений
* Вход с нескольких устройств с синхронизацией сообщений
* Объмен любыми файлами

## Серверная часть
Сервер инциализирует подключение к базе данных и выгружает от туда необходимые данные, затем выставляет порт, по которому ожидает подключение.
Сервер принимает запросы 8 видов:
  * Авторизация - проверка существования пользователя в БД.
  * Регистрация - добавление нового пользователя в БД.
  * Текстовое сообщение - сохранение сообщения в БД и рассылка всем подключенным пользователям.
  * Проверка подключения - запрос для проверки стабильности подключения.
  * Итория сообщений - отправка набора из 10 сообщений с требуемого индекса. 
  * Отправка файла клиенту - отправка файла с сервера пользователю.
  * Скачивание файла от клиента - скачивание и сохранение нового файла от пользователя.
  * Подписка на рассылку новых сообщений - добавить сокет в список подключенных клиентов.

В базу данных выполняются SQL запросы для авторизации и регистрации пользователей, выкачивание истории и сохранение новых сообщений, загрузка новых и скачивание существующих файлов.
При отправке файлов между клиентом и сервером, с целью возможности передачи больших данных, включается режим скачивания и файлы передаются/примаются по частям.

## Клиентская часть
Приложение с графическим интерфейсом на QT. Использует сокеты для подключения к серверу.
Состоит из двух экранов: 
* Авторизаци
* Чат
 
Экран авторизации позволяет выполнить вход и регистрацию пользователя используя интерфейс. Данные проверяются на корректность, затем отправляется соотвествующий запрос на сервер.
Экран с чатом позволяет получать сообщения и отправлять сообщения. Сообщения могут быть тестом или файлом. Отправленные файлы можно скачать на компьютер. Создается 2 сокета, первый для отправки и получения текстовых сообщений, а второй для отправки и скачивания файлов, чтобы пользователь мог продолжать использовать чат во время загрузки файлов. Есть возможность загрузить историю сообщений.
  
## База данных:
Таблицы в БД:
* Users - хранит информацию о пользователях в системе (логин, пароль).
* Messenges - хранит историю сообщения (логин, тест сообщения, время, id, тип сообщения, id прикрепленного файла)
* Files - хранит отправленные пользователями файлы (название файла, массив байтов, id файла)
